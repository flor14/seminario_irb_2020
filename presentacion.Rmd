---
title: "Produciendo mi pr√≥ximo art√≠culo cient√≠fico con R"
subtitle: "Compendios de Investigaci√≥n, Reproducibilidad e Interactividad en las publicaciones acad√©micas"  
author: 
  - "Dra. Florencia D'Andrea"
date: '2/12/2020'
output:
  xaringan::moon_reader:
    seal: false # saco filmina de inicio
    lib_dir: libs
    css: xaringan-themer.css
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
library(xaringanExtra)
library(tidyverse)
library(knitr)
library(icon)
library(nomnoml)
library(countdown)
xaringanExtra::use_logo(
  image_url = "https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/xaringan.png"
)
xaringanExtra::use_panelset()
xaringanExtra::use_broadcast()
xaringanExtra::use_share_again()
xaringanExtra::style_share_again(share_buttons = c("twitter", "linkedin"))
xaringanExtra::use_tachyons()
xaringanExtra::use_fit_screen()
xaringanExtra::use_tile_view() # O
style_mono_accent(
  background_color = "#f0faf9",
  inverse_background_color = "#119da4",
  header_color = "#2e294e",
  inverse_header_color = "#ffffff", 
  inverse_text_color = "#ffffff",
  code_inline_color = "#179c55",
  link_color= "#2E294E",
  text_font_size = "24px",
  header_font_google = google_font("Poppins", "Regular", "400"),
  text_font_google   = google_font("Darker Grotesque", "500"),
  code_font_google   = google_font("Fira Mono"),
  )

```



class: inverse, middle

`r countdown(minutes = 5, style = "position: relative; width: min-content;", color_warning_background = "#aecc8c")`


## ¬°Hola!
### Empezamos en 5 minutos
Tenes tiempo para irte a buscar el ‚òï o preparar el agua para el üßâ

---

class: inverse, center, middle

### Seminario del Instituto de Recursos Biol√≥gicos del INTA

¬°Los estabamos esperando!

---

background-image: url(imagenes/back2.jpg)
background-size: cover
class: middle, center

## Produciendo mi pr√≥ximo art√≠culo cient√≠fico con R:
### Compendios de Investigaci√≥n, Reproducibilidad e Interactividad en las publicaciones acad√©micas
 
 
.large[#### Dra. Florencia D'Andrea | Instituto de Recursos Biol√≥gicos]

---

class: center, middle, inverse

# Licencia

<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Licencia de Creative Commons" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />Este obra est√° bajo una <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">licencia de Creative Commons Reconocimiento 4.0 Internacional</a>

---

## Postdoc 

.bg-washed-green.b--dark-green.ba.bw2.br3.shadow-5.ph4.mt5[
Desarrollo de herramientas inform√°ticas para evaluar el riesgo de las aplicaciones de plaguicidas para los ecosistemas acu√°ticos
]

```{r pc, echo=FALSE, fig.align='center'}
knitr::include_graphics("imagenes/flyer.png")
```


---

> Mi trabajo implica usar **modelos** que simulan el destino ambiental de los **plaguicidas** luego de su aplicaci√≥n. 

> Los resultados de estos modelos se exigen en otros pa√≠ses como parte del proceso de **regulaci√≥n** de plaguicidas.

---

## Mi pr√≥xima publicaci√≥n se llama 

.bg-washed-green.b--dark-green.ba.bw2.br3.shadow-5.ph4.mt5[

Statistically-based soil-climate exposure scenarios for aquatic pesticide fate modelling and exposure assessment in the Pampa Region of Argentina.

]



---

# Objetivos

> Detectar una unidad suelo-clima candidata a ser m√°s vulnerable a la contaminaci√≥n por plaguicidas en cuerpos de agua superficiales. 


--

> Estimar un valor de concentraci√≥n en el cuerpo de agua para cada plaguicida que sea lo suficientemente representativo toda la regi√≥n pampeana.

--

> Pensar diferentes escenarios de conservaci√≥n.

---

# Bases de datos

* Suelo
* Fenolog√≠a
* Hidrolog√≠a
* Clima
* Mol√©culas

```{nomnoml echo=FALSE, svg= TRUE, fig.width = 10}

# direction: down | center 
#.rlang: fill=#8f8 visual=ellipse title=bold

[base de datos 1] 
[base de datos 2] 
[base de datos *n*] 
```

Empleo distintas bases de datos

---

# Modelo

**Pesticide Water Calculator v1.52** (USEPA)
 
Automatizaci√≥n de corridas: 
118500 simulaciones =  30 a√±os `*`  50 plaguicidas `*` 78 suelos - clima 

```{nomnoml echo=FALSE, svg= TRUE, fig.width = 10}

# direction: down | center 
#.high: fill=#8f8 title=bold

[base de datos 1] --> [<high>Modelo PWC]
[base de datos 2] --> [<high>Modelo PWC]
[base de datos *n*] --> [<high>Modelo PWC]
```

> Me permite estimar concentraciones que pueden alcanzar los mismos en **cuerpos de agua superficiales** de la **regi√≥n pampeana**

---

# Resultados

¬°Una nueva base de datos!

```{nomnoml echo=FALSE, svg= TRUE, fig.width = 10}

# direction: down | center 
#.high: fill=#8f8 title=bold

[base de datos 1] --> [Modelo PWC]
[base de datos 2] --> [Modelo PWC]
[base de datos *n*] --> [Modelo PWC]
[Modelo PWC] -> [<high>Resultados]
```

---

# Las Figuras

Proceso los resultados. Obtengo distintos productos para incluir como figuras o como parte de la publicaci√≥n.

```{nomnoml echo=FALSE, svg= TRUE, fig.width = 10}

# direction: down | center 
#.rlang: fill=#8f8 visual=ellipse title=bold
#.high: fill=#8f8 title=bold

[base de datos clima] --> [Modelo PWC]
[base de datos suelo] --> [Modelo PWC]
[base de datos mol√©culas] --> [Modelo PWC]
[Modelo PWC] -> [Resultados]
[Resultados] - [<rlang> R]
[<rlang> R] -> [<high>Gr√°ficos]
[<rlang> R] -> [<high>Tablas]
[<rlang> R] -> [<high>Mapas]

```

---

class: inverse, middle, center

# Contexto

---

## ¬øPodes volver a reproducir tu c√≥digo?

```{r nt, echo=FALSE, out.width=400, fig.align='center'}
knitr::include_graphics("imagenes/nature1.png")
```

.footnote[[Art√≠culo de Nature](https://www.nature.com/articles/d41586-020-02462-7)]


---

# ¬øUn cambio cultural?

.pull-up[
```{r cd, echo=FALSE, out.width=400, fig.align='center'}
knitr::include_graphics("imagenes/codecheck.png")
```
.footnote[[Codecheck](https://www.nature.com/articles/d41586-020-02462-7)]
 ]
 
.pull-down[
```{r cd2, echo=FALSE, out.width=700, fig.align='center'}
knitr::include_graphics("imagenes/codecheck2.png")
```

]

---

# ¬øUn cambio cultural?

```{r tw, echo=FALSE, out.width=600,fig.align='center'}
knitr::include_graphics("imagenes/tw_rh.png")
```

.footnote[[Twitter ReproHack](https://www.nature.com/articles/d41586-020-02462-7)]

---

# Reproducibilidad computacional

```{r repro, echo = FALSE, fig.align='right'}
knitr::include_graphics("imagenes/CultureShift.jpg")
```
.footnote[[Scriberia](https://www.nature.com/articles/d41586-020-02462-7)]
---
class: inverse, middle, center
# üôåüë©‚Äçüíª
# ¬°Manos a la obra!

---

```{r journey, echo = FALSE, out.width=700, fig.align='center'}
knitr::include_graphics("imagenes/ReproducibleJourney.jpg")
```

---

## Software y datos

* Los **datos** son hechos u observaciones que proporcionan **evidencia**. 

* El **software** es el resultado de un proceso creativo que **proporciona una herramienta** para hacer algo, por ejemplo, con datos.


-> El software es ejecutable.

-> El software a menudo se crea con otro software.

.footnote[Towards FAIR principles for research software]

---

# Software para investigaci√≥n

.bg-washed-green.b--dark-green.ba.bw2.br3.shadow-5.ph4.mt5[
"Software que se utiliza para generar, procesar o analizar los resultados que desea que aparezcan en una **publicaci√≥n** (ya sea en una revista, art√≠culo de conferencia, monograf√≠a, libro o tesis)"]

.footnote[Hettrick *et al.* (2014)]

---

### Dejando c√≥digo y datos disponibles
#### Ciencia tan abierta como sea posible y tan cerrada como sea necesario

.panelset[
.panel[.panel-name[Ciencia abierta]

es la pr√°ctica de dejar "los resultados primarios de investigaciones financiados con fondos p√∫blicos, las publicaciones y los datos sean accesibles al p√∫blico en formato digital sin restricciones o con una restricci√≥n m√≠nima".

OECD (2015)

* Estar disponibles publicamente

* Ser reutilizables

* Ser transparente

[The Turing Way Checklist](https://the-turing-way.netlify.app/reproducible-research/open/open-resources.html)
]
.panel[.panel-name[Principios FAIR]

Ciencia tan abierto como sea posible, tan cerrado como sea necesario‚Äù (abierto por defecto)

#### **F**indable
* Ejemplo: Los investigadores usan ORCID y buscan DOI para resultados de datos de investigaci√≥n.

#### **A**ccesible
* Se obtienen DOIs para conjuntos de datos de investigaci√≥n.

#### **I**nteroperable
* Si su repositorio de datos institucionales permite que un agregador recopile metadatos.

#### **R**eutilizable
* Licencias para datos de investigaci√≥n.

[Library Carpentry](https://librarycarpentry.org/lc-fair-research/01-introduction/index.html)
]]


---

## Los datos y el software se citan

#### Autores de art√≠culos
* Citar datos y software que usas
* Publica tu propios datos y software y citalos tambi√©n
* Obten√© un ORCID id

--
#### Para quienes generan datos
* Depositalos en un repositorio "estable" 
* Obten√© un DOI
* Inclu√≠ un ejemplo de c√≥mo citarlo en el README


.footnote[[The Turing Way - Credit for reproducible research](https://the-turing-way.netlify.app/reproducible-research/credit.html?highlight=cite%20data)]

---




---
## Los datos y el software se citan
#### Para quienes desarrollan software

* Deposite versiones clave de su software en un repositorio estable

* Obtenga un DOI distinto para cada versi√≥n

* Incluya un ejemplo de c√≥mo citar su software en el manual o documentaci√≥n

#### Ejemplo
v1.0 (specific version): 10.5281/zenodo.60943
v1.1 (specific version): 10.5281/zenodo.800648
Concept (all versions): 10.5281/zenodo.705645

.footnote[[The Turing Way - Credit for reproducible research](https://the-turing-way.netlify.app/reproducible-research/credit.html?highlight=cite%20data)]
.footnote[[Zenodo - DOI versioning](https://help.zenodo.org/#versioning)]

---

```{r doiversion, echo = FALSE, out.width=900, fig.align='center'}

knitr::include_graphics("imagenes/zenodo_versioning.png")
```
.footnote[[Zenodo - Zenodo now supports DOI versioning!](https://blog.zenodo.org/2017/05/30/doi-versioning-launched/)]



---
# ¬øComo hacer a tus datos citables?

# Integraci√≥n Zenodo - GitHub

---

class: inverse, center, middle

## Desafios



---

class: middle, inverse

### üëâ **Compendio de investigaci√≥n**

### Reproducibilidad computacional 

### Interactividad



---

## Compendio de investigaci√≥n

.pull-left[

* **Organizar los archivos** de acuerdo a una convenci√≥n prevalente.

* Proveer **separaci√≥n entre los datos, m√©todos y salidas** expresando sin ambiguedades la relaci√≥n entre las tres.

* Especificar el entorno (+ **reproducibilidad**).

.footnote[Marwick 2018]
]

.pull-right[
```{r rc, echo = FALSE, out.width=500}

knitr::include_graphics("imagenes/ResearchCompendium.jpg")

```
]


---

## Compendio de investigaci√≥n
#### Estructura

.pull-left[

Otra persona pueda saber que encontrar por los nombres de los archivos y directorios. 

**Marwick(2018)** Utilizar la estructura de un paquete de R

Crea el paquete `rrtools`
]

.pull-right[
```{r rc2, echo = FALSE, out.width=400}

knitr::include_graphics("imagenes/small_rc.png")

```
]


---

## Paquete `rrtools` 

Tutorial 

```{r rclogo, echo = FALSE, out.width=100}
knitr::include_graphics("imagenes/rc-logo.png")
```

* Archivo `README.md` que describe el proyecto

*  Programaci√≥n literaria (`RMarkdown`)

* Estructura de paquete (Archivo DESCRIPTION con las dependencias)

* Manejo de bibliograf√≠a integrado (`citr`)

`r icon::fa("folder")`

---

### ¬øC√≥mo compartir un Compendio de investigaci√≥n?

.panelset[

.panel[.panel-name[Licencia]

* **Incluir un archivo con la licencia** indica a los dem√°s c√≥mo puede ser reutilizado tu trabajo.

* Los **datos** y las **figuras** podrian tener diferentes licencias.

--

```{r usethis, echo = FALSE, out.width=50}
knitr::include_graphics("imagenes/usethis.png")
```

El paquete `usethis` incluye funciones que agregan la licencia que elijas a tu proyecto:

```{r usethis2, eval=FALSE, include=TRUE}
library(usethis)
usethis::use_mit_license("Florencia D Andrea")
```
]

.panel[.panel-name[Control de versiones]

Sistemas de control de versiones como `Git` <ion-icon name="logo-octocat"></ion-icon> es la mejor manera de preservar el historial de cambios en el compendio de investigaci√≥n.

* Facilita la colaboraci√≥n privada entre colegas
sobre el proyecto 

* Facilita la distribuci√≥n y mantenimiento del compendio en el futuro

]
.panel[.panel-name[Persistencia]

Asignarle una URLs permanente al repositorio como un `Digital Object Identifier (DOI)` `r icon::ai("doi")`  

* osf.io `r icon::ai("osf")`
 
* figshare.com  `r icon::ai("figshare")`

* zenodo.org <i class="ai ai-zenodo ai-3x"></i>
]
.panel[.panel-name[Metadata]

Cuando se genera un DOI para un repositorio tambi√©n se debe proporcionar informaci√≥n b√°sica de metadatos para un registro central que supervisa la creaci√≥n de DOI:

* CrossRef (principalmente art√≠culos de revistas) 

* DataCite (datos y otros productos) 

]

]

.footnote[Marwick(2018)]


---

## Dar cr√©dito (al trabajo propio y ajeno)
#### Asignar un DOI

.panelset[
.panel[.panel-name[¬øQu√© es?]

]

.panel[.panel-name[Ventajas]

]

.panel[.panel-name[Pasos para obtenerlo]

]

.panel[.panel-name[Citando versiones]

]

]

---

## ¬øQue agrego cuando agrego un compendio de investigacion?

```{nomnoml echo=FALSE, svg= TRUE, fig.width = 10}

# direction: down | center 
#.rlang: fill=#8f8 visual=ellipse title=bold
#.high: fill=#8f8 title=bold

[base de datos clima] --> [Modelo PWC]
[base de datos suelo] --> [Modelo PWC]
[base de datos mol√©culas] --> [Modelo PWC]
[Modelo PWC] -> [Resultados]
[Resultados] - [<rlang> R]
[<rlang> R] -> [Gr√°ficos]
[<rlang> R] -> [Tablas]
[<rlang> R] -> [Mapas]
[<rlang> R] -> [<high>Compendio de investigaci√≥n]

```



---

class: middle, inverse

### Compendio de investigaci√≥n

### üëâ **Reproducibilidad computacional** 

### Interactividad








---


class: middle, center

.bg-washed-green.b--dark-green.ba.bw2.br3.shadow-5.ph4.mt5[
####"El hecho de que un an√°lisis sea reproducible **no garantiza su calidad**, que este sea correcto o la validez de los resultados publicados" - Peng (2011)

]




---

class: center, middle, inverse

## ¬øBasta con dejar el c√≥digo y los datos disponibles para que tu art√≠culo sea reproducible?



---


# Reproducibilidad computacional

.panelset[
.panel[.panel-name[¬øQu√© es?]

.bg-washed-green.b--dark-green.ba.bw2.br3.shadow-5.ph4.mt5[

 Cuando se proporciona informaci√≥n detallada sobre c√≥digo, software, hardware y detalles de implementaci√≥n.

.tr[
 Stodden, 2014
]]
 
]

.panel[.panel-name[Ejemplos]


]

.panel[.panel-name[Entornos]

*  session.info()
* "Empaquetar" los datos
*  Paquetes de manejo de dependencias (renv)
*  Notebooks interactivas (Binder / RStudio Cloud)

Recomiendo, esta charla que d√≠ en R-Ladies BA
]
]

.footnote["M√°s informaci√≥n en el siguiente link"]


---

class: inverse, middle, center

## ¬øQu√© usamos para asegurar la reproducibilidad de los art√≠culos cient√≠ficos?

---


.bg-washed-green.b--dark-green.ba.bw2.br3.shadow-5.ph4.mt5[
"El software (...) con frecuencia se desarrolla para permitir el uso de otro software, lo que genera dependencias complejas, y estos paquetes de software dependientes cambian a su vez con frecuencia"]

.footnote[Katz 2016]


---

### Entorno computacional 

Caracter√≠sticas de una computadora que pueden afectar el comportamiento del trabajo realizado en ella, como:
* su **sistema operativo**
* qu√© **software** tiene instalado 
* las **versiones de paquetes** de software est√°n instaladas

.footnote[The Turing Way]
---

## Compartiendo mi trabajo - C√°psula del tiempo

No solo conservar los entornos me permite poder volver a reproducir mi trabajo si actualice mi software, sino tambi√©n permite que el c√≥digo corra independientemente de la computadora en la que este

---

# Entornos

* renv
* DESCR

---


## Mejora mi flujo de trabajo


* Mi proyecto esta organizado

* No tengo problema en compartirlo con quien quiera.

---

## Mejora la calidad de mi trabajo

* Tweet de la gente

---

## Recomendaci√≥n

[Post](https://florencia.netlify.app/es-es/2020/08/compartiendo-entornos-interactivos-y-reproducibles-en-r-con-binder.es-es/) sobre Binder en R-Ladies BA (incluye charla)

```{r binder, echo=FALSE}
knitr::include_url("https://flor14.github.io/r_de_reproducibilidad/r_de_reproducibilidad.html#1")
```

---

class: middle, inverse

### Compendio de investigaci√≥n

### Reproducibilidad computacional

### üëâ **Interactividad**

---

## Comunicaci√≥n de mis resultados

* Aplicaci√≥n web (**shiny**)
* Gr√°ficos interactivos (**plotly**)
* Papers interactivos y reproducibles (**stencila**)

---


## Shiny

.panelset[
.panel[.panel-name[¬øQu√© es?]

]

.panel[.panel-name[Ventajas]

]

.panel[.panel-name[Ejemplo]

App 1 - 

App 2-


]

]



---

## Gr√°ficos interactivos
#### Plotly

.panelset[
.panel[.panel-name[¬øQu√© es?]

]

.panel[.panel-name[Ventajas]

]

.panel[.panel-name[Ejemplo]

]

]

---

class: inverse, middle, center

# Articulo reproducible
Mostrar que esto existe

[Art√≠culo reproducible](https://elifesciences.org/articles/30274/executable)

[stenci.la](https://stenci.la/)


---

class: inverse, middle, center

# Mi trabajo

[Shiny app]()

[]()

---

# ROpenSci

```{r ropen, echo = FALSE, out.width=300, fig.align='right'}
knitr::include_graphics("imagenes/ropensci.png")
```

[Web](https://ropensci.org/)



---

# The Turing Way

```{r open, echo = FALSE, out.width=300, fig.align='right'}
knitr::include_graphics("imagenes/LogoDetailWithText.jpg")
```

Libro de [The Turing Way](https://the-turing-way.netlify.app/welcome)

---

# ReproHack

```{r rh, echo = FALSE, out.width=300, fig.align='right'}
knitr::include_graphics("imagenes/reprohack.png")
```


---

# ReproHack en LatinR 2020

Lista de reproducci√≥n en YouTube con 6 charlas

```{r rhlr, echo=FALSE}
xaringanExtra::embed_xaringan(url = "https://flor14.github.io/latinr-reprohack/index.html#1")
```

---

```{r trt, echo=FALSE, out.height="600", out.width="500", fig.align='center'}
knitr::include_graphics("imagenes/toronto.jpg")
```


---
class: inverse

# Referencias
#### Principios FAIR / Ciencia Abierta / Reproducibilidad
* [The Turing Way book](https://the-turing-way.netlify.app/)

* [Lista de recursos sobre Research compendium](https://research-compendium.science/)
* [OECD (2015), ‚ÄúMaking Open Science a Reality‚Äù](https://www.fct.pt/dsi/docs/Making_Open_Science_a_Reality.pdf), OECD Science, Technology and Industry Policy Papers, No. 25,
OECD Publishing, Paris. http://dx.doi.org/10.1787/5jrs2f963zs1-en

* Wilkinson, M., Dumontier, M., Aalbersberg, I. et al. The FAIR Guiding Principles for scientific data management and stewardship. Sci Data 3, 160018 (2016). https://doi.org/10.1038/sdata.2016.18

* [Principios FAIR](https://www.go-fair.org/fair-principles/)

* [Library Carpentry: FAIR Data and Software](https://librarycarpentry.org/lc-fair-research/)

* Data Citation Synthesis Group: Joint Declaration of Data Citation Principles. Martone M. (ed.) San Diego CA: FORCE11; 2014 [https://www.force11.org/group/joint-declaration-data-citation-principles-final].

* Katz DS, Niemeyer KE, Smith AM, Anderson WL, Boettiger C, Hinsen K, Hooft R, Hucka M, Lee A, L√∂ffler F, Pollard T, Rios F. 2016. Software vs. data in the context of citation. PeerJ Preprints 4:e2630v1 https://doi.org/10.7287/peerj.preprints.2630v1

* [Improve your workflow for
reproducible science
Mine √áetinkaya-Rundel](https://mine-cetinkaya-rundel.github.io/improve-repro-workflow-reproducibilitea-2020/slides/improve-repro-workflow-reproducibilitea-2020.pdf) 

---
class: inverse

# Referencias
#### Reproducibilidad computacional
* [The Turing Way book](https://the-turing-way.netlify.app/)

* UseR 2020 

* Victoria Stodden. Edge.org. May 2014. [Online; accessed 27. May 2020]. URL: https://www.edge.org/response-detail/25340.

* Peng RD (2011), Reproducible Research in Computational Science. Science 334(6060): 1226‚Äì1227. doi:10.1126/science.1213847.

---
class: inverse

# Referencias
#### Herramientas en R / COmpendios

Francisco 

Anna rrtools

drake

https://zenodo.org/communities/research-compendium/?page=1&size=20

---

class: inverse, center, middle

## ¬°Muchas gracias por su atencion!

<br><br>
Dra. Florencia D'Andrea <br> **Investigadora postdoctoral** <br>
`r icon::fa("github")` [flor14]("http://github.com/flor14") <br>
`r icon::fa("twitter")` [cantoflor87]("http://twitter.com/cantoflor87")<br>
`r icon::fa("link")` [florencia.netlify.app/es-es/]("https://florencia.netlify.app/es-es/")<br>

 <br> <br>

 Filminas disponibles <https://flor14.github.io/seminario_irb_2020/presentacion.html#1> 

---